<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamento de Mesas - Dogs.com</title>
    <style>
            body {
            font-family: 'Segoe UI', sans-serif;
            background: url(../img/fundo.jpg) center center fixed;
            background-size: cover;
            margin: 0;
            padding: 0;
            color: #fff;
        }
        .container {
            background-color: rgba(0, 0, 0, 0.7);
            max-width: 400px;
            margin: 50px auto;
            padding: 30px;
            border-radius: 10px;
            box-sizing: border-box;
        }
        h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        label {
            display: block;
            margin-top: 10px;
            font-size: 1em;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            background-color: #e67e22;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
        }
        .confirmation {
            display: none;
            margin-top: 20px;
            padding: 10px;
            background-color: #27ae60;
            border-radius: 5px;
            text-align: center;
            font-size: 1em;
        }
        .logo {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 300px;
            height: auto;
            z-index: 1000;
            transition: width 0.3s;
        }

        /* ====== para pagina responsiva ====== */
        @media (max-width: 900px) {
            .container {
                max-width: 90vw;
                padding: 20px;
            }
            .logo {
                width: 180px;
                top: 10px;
                left: 10px;
            }
        }
        @media (max-width: 700px) {
            .container {
                max-width: 98vw;
                margin: 20px auto;
                padding: 10px;
            }
            .logo {
                width: 120px;
                top: 5px;
                left: 5px;
            }
            h2 {
                font-size: 1.2em;
            }
            label, input, select, button {
                font-size: 0.95em;
            }
        }
        @media (max-width: 500px) {
            .logo {
                display: none;
            }
            .container {
                margin: 10px;
                padding: 5vw;
                border-radius: 5px;
            }
            h2 {
                font-size: 1em;
            }
            label, input, select, button {
                font-size: 0.9em;
            }
        }

        /* ====== para parte de acessibilidade ====== */
        .high-contrast body, .high-contrast .container {
            background-color: #000 !important;
            color: #FFD700 !important;
        }
        .high-contrast input, .high-contrast select, .high-contrast button {
            background-color: #222 !important;
            color: #FFD700 !important;
            border: 2px solid #FFD700 !important;
        }
        .high-contrast .confirmation {
            background-color: #333 !important;
            color: #FFD700 !important;
        }
        .accessibility-bar {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 10px;
        }
        .accessibility-bar button {
            background: #222;
            color: #FFD700;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 1em;
        }
        .accessibility-bar button:focus {
            outline: 2px solid #FFD700;
        }
    </style>
</head>
<body>
    <!-- ====== para barra de acessibildiade ====== -->
    <div class="accessibility-bar" aria-label="Barra de acessibilidade">
        <button id="toggle-contrast" aria-pressed="false" title="Ativar/Desativar alto contraste">Alto Contraste</button>
        <button id="increase-font" title="Aumentar fonte">A+</button>
        <button id="decrease-font" title="Diminuir fonte">A-</button>
    </div>

    <!-- ====== inclução logo para render ====== -->
    <img src="../img/logo.png" alt="Logo Dogs.com" class="logo">

    <!-- ====== formulario de agendamento - opções JS====== -->
    <div class="container">
        <h2>Agendamento de Mesas - DOGS.COM</h2>
        <form id="bookingForm">
            <label for="name">Nome:</label>
            <input type="text" id="name" name="name" required aria-required="true" aria-label="Nome">

            <label for="phone">Telefone:</label>
            <input type="tel" id="phone" name="phone" required aria-required="true" aria-label="Telefone">

            <label for="date">Data:</label>
            <input type="date" id="date" name="date" required aria-required="true" aria-label="Data">

            <label for="time">Horário:</label>
            <select id="time" name="time" required aria-required="true" aria-label="Horário">
                <option value="">Selecione</option>
            </select> 

            <label for="people">Número de Pessoas:</label>
            <select id="people" name="people" required aria-required="true" aria-label="Número de Pessoas">
                <option value="">Selecione</option>
                <!-- opções de 1 a 50 como nao consegui automatizar fiz copy cola da mesa 1 ate a 50 -->
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
            </select>

            <label for="table">Número da Mesa:</label>
            <select id="table" name="table" required aria-required="true" aria-label="Quantidade da Mesa">
                <option value="">Selecione</option>
                <!-- opções de 1 a 25 copia do codigo 1 a 25 -->
                <option value="1">Mesa 1</option>
                <option value="2">Mesa 2</option>
                <option value="3">Mesa 3</option>
                <option value="4">Mesa 4</option>
                <option value="5">Mesa 5</option>
                <option value="6">Mesa 6</option>
                <option value="7">Mesa 7</option>
                <option value="8">Mesa 8</option>
                <option value="9">Mesa 9</option>
                <option value="10">Mesa 10</option>
                <option value="11">Mesa 11</option>
                <option value="12">Mesa 12</option>
                <option value="13">Mesa 13</option>
                <option value="14">Mesa 14</option>
                <option value="15">Mesa 15</option>
                <option value="16">Mesa 16</option>
                <option value="17">Mesa 17</option>
                <option value="18">Mesa 18</option>
                <option value="19">Mesa 19</option>
                <option value="20">Mesa 20</option>
                <option value="21">Mesa 21</option>
                <option value="22">Mesa 22</option>
                <option value="23">Mesa 23</option>
                <option value="24">Mesa 24</option>
                <option value="25">Mesa 25</option>
            </select>

            <button type="submit">Agendar</button>
        </form>
        <div class="confirmation" id="confirmationMessage" role="status" aria-live="polite">
            Reserva realizada com sucesso! Reserva válida até 30 min após data e hora agendada!.
        </div>
    </div>

    <!-- ====== scripts ====== -->
    <script>
        // ========== horarios conforme os dias ==========
        document.getElementById('date').addEventListener('change', function() {
            const dataInput = this.value;
            const timeSelect = document.getElementById('time');
            if (!dataInput) {
                timeSelect.disabled = true;
                return;
            }

            const data = new Date(dataInput + 'T00:00');
            const diaSemana = data.getDay(); // 0=Dom, 1=Seg, ..., 6=Sáb

            // Limpa as opções
            timeSelect.innerHTML = '<option value="">Selecione</option>';

            // Dias fechados
            if (diaSemana === 1 || diaSemana === 2 || diaSemana === 3) {
                timeSelect.disabled = true;
                return;
            }

            timeSelect.disabled = false;

            // Quinta e Domingo: 19:00 às 23:00
            if (diaSemana === 4 || diaSemana === 0) {
                for (let h = 19; h <= 23; h++) {
                    timeSelect.innerHTML += `<option value="${h.toString().padStart(2, '0')}:00">${h}:00 PM</option>`;
                    if (h !== 23) {
                        timeSelect.innerHTML += `<option value="${h.toString().padStart(2, '0')}:30">${h}:30 PM</option>`;
                    }
                }
            }
            // Sexta e Sábado: 19:00 às 00:00
            else if (diaSemana === 5 || diaSemana === 6) {
                for (let h = 19; h <= 23; h++) {
                    timeSelect.innerHTML += `<option value="${h.toString().padStart(2, '0')}:00">${h}:00 PM</option>`;
                    if (h !== 23) {
                        timeSelect.innerHTML += `<option value="${h.toString().padStart(2, '0')}:30">${h}:30 PM</option>`;
                    }
                }
                timeSelect.innerHTML += `<option value="23:30">23:30 PM</option>`;
                timeSelect.innerHTML += `<option value="00:00">00:00 PM</option>`;
            }
        });

        // ========== validacao da data e hora ==========
        function validarDataHora() {
            const dataInput = document.getElementById('date').value;
            const horaInput = document.getElementById('time').value;

            if (!dataInput || !horaInput) return false;

            // Validação para data não ser passada
            const hoje = new Date();
            hoje.setHours(0,0,0,0);
            const dataSelecionada = new Date(dataInput + 'T00:00');
            if (dataSelecionada < hoje) {
                alert('A data de agendamento deve ser hoje ou futura.');
                return false;
            }

            const data = new Date(dataInput + 'T' + horaInput);
            const diaSemana = data.getDay(); // 0=Dom, 1=Seg, ..., 6=Sáb
            const hora = parseInt(horaInput.split(':')[0]);
            const minuto = parseInt(horaInput.split(':')[1]);

            // Dias fechados: segunda (1), terça (2), quarta (3)
            if (diaSemana === 1 || diaSemana === 2 || diaSemana === 3) {
                alert('Neste dia não há atendimento (FECHADO).');
                return false;
            }

            // Quinta-feira (4): 19:00 às 23:00
            if (diaSemana === 4) {
                if (hora < 19 || hora > 23 || (hora === 23 && minuto > 0)) {
                    alert('Na quinta-feira, o horário permitido é das 19:00 às 23:00.');
                    return false;
                }
            }

            // Sexta-feira (5) e Sábado (6): 19:00 às 00:00
            if (diaSemana === 5 || diaSemana === 6) {
                if (hora < 19 || (hora === 0 && minuto > 0) || hora > 23 || (hora === 23 && minuto > 59)) {
                    alert('Na sexta-feira e sábado, o horário permitido é das 19:00 às 00:00.');
                    return false;
                }
            }

            // Domingo (0): 19:00 às 23:00
            if (diaSemana === 0) {
                if (hora < 19 || hora > 23 || (hora === 23 && minuto > 0)) {
                    alert('No domingo, o horário permitido é das 19:00 às 23:00.');
                    return false;
                }
            }

            return true;
        }

        // ========== para enviar o formulario via wats, esta meu numero para teste, podem alterar ==========
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (!validarDataHora()) return;

            // Pega os dados do formulário
            const nome = document.getElementById('name').value;
            const telefone = document.getElementById('phone').value;
            const data = document.getElementById('date').value.split('-').reverse().join('/');
            const horario = document.getElementById('time').value;
            const pessoas = document.getElementById('people').value;
            const mesa = document.getElementById('table').value;

            // Mensagem para WhatsApp
            const mensagem = `Olá! Gostaria de confirmar minha reserva:\n\nNome: ${nome}\nTelefone: ${telefone}\nData: ${data}\nHorário: ${horario}\nPessoas: ${pessoas}\nMesa: ${mesa}`;
            const telefoneWhats = "19996294566"; // Número do restaurante

            // Abre o WhatsApp Web/App com a mensagem pronta
            window.open(`https://wa.me/55${telefoneWhats}?text=${encodeURIComponent(mensagem)}`, '_blank');

            // Exibe confirmação e reseta formulário
            document.getElementById('confirmationMessage').style.display = 'block';
            this.reset();
            document.getElementById('time').disabled = false;
        });

        // ========== acessibilidade ==========
        const html = document.documentElement;
        const body = document.body;
        let fontSize = 100;

        document.getElementById('toggle-contrast').addEventListener('click', function() {
            html.classList.toggle('high-contrast');
            this.setAttribute('aria-pressed', html.classList.contains('high-contrast'));
        });

        document.getElementById('increase-font').addEventListener('click', function() {
            if (fontSize < 150) fontSize += 10;
            body.style.fontSize = fontSize + '%';
        });

        document.getElementById('decrease-font').addEventListener('click', function() {
            if (fontSize > 80) fontSize -= 10;
            body.style.fontSize = fontSize + '%';
        });

        // Garante que o campo de horário inicie habilitado
        document.getElementById('time').disabled = false;
    </script>
</body>

</html>
